{"ast":null,"code":"import{useContext,useEffect}from\"react\";import CurrentUserContext from\"../../contexts/CurrentUserContext\";import useFormValidate from\"../../utils/hooks/useFormValidate\";import PopupWithForm from\"../PopupWithForm/PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProfilePopup(_ref){let{isOpen,onClose,onUpdateUser,isLoadingPopup}=_ref;const currentUser=useContext(CurrentUserContext);const{formValues,errors,isFormValid,isInputValid,handleChange,resetForm,setInitialValue}=useFormValidate();useEffect(()=>{setInitialValue(\"username\",currentUser.name);setInitialValue(\"job\",currentUser.about);},[currentUser,setInitialValue]);function handleClosePopupResetForm(){onClose();resetForm({username:currentUser.name,job:currentUser.about});}function handleSubmit(evt){evt.preventDefault();onUpdateUser(formValues,resetForm);}const inputErrorClass=input=>input in isInputValid&&!isInputValid[input]?\"form__input_type_error\":\"\";return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"edit-profile\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",titleBtn:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",isOpen:isOpen,onClose:handleClosePopupResetForm,isFormValid:isFormValid,onSubmit:handleSubmit,isLoadingPopup:isLoadingPopup,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form__label\",htmlFor:\"username\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"username\",className:\"form__input form__input_type_name \".concat(inputErrorClass(\"username\")),name:\"username\",minLength:2,maxLength:40,type:\"text\",required:true,placeholder:\"\\u0412\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\",value:formValues.username||\"\",disabled:isLoadingPopup,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{className:\"form__span-error username-error\",children:errors.username})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"form__label\",htmlFor:\"job\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"job\",className:\"form__input form__input_type_job \".concat(inputErrorClass(\"job\")),name:\"job\",minLength:2,maxLength:200,type:\"text\",required:true,placeholder:\"\\u041E \\u0432\\u0430\\u0441\",value:formValues.job||\"\",disabled:isLoadingPopup,onChange:handleChange}),/*#__PURE__*/_jsxs(\"span\",{className:\"form__span-error job-error\",children:[errors.job,\" \"]})]})]});}// import { useContext, useEffect } from \"react\";\n// import CurrentUserContext from \"../../contexts/CurrentUserContext\";\n// import useFormValidate from \"../../utils/hooks/useFormValidate\";\n// import PopupWithForm from \"../PopupWithForm/PopupWithForm\";\n// export default function EditProfilePopup({isOpen, onClose, onUpdateUser, isLoadingPopup }) {\n//   const currentUser = useContext(CurrentUserContext)\n//   //const {name, about} = currentUser\n//   const {\n//     formValues,\n//     errors,\n//     isFormValid,\n//     isInputValid,\n//     handleChange,\n//     resetForm,\n//     setInitialValue\n//   } = useFormValidate();\n//   useEffect(() => {\n//     setInitialValue(\"username\", currentUser.name)\n//     setInitialValue(\"job\", currentUser.about)\n//   }, [currentUser, setInitialValue])\n//   function handleClosePopupResetForm() {\n//     onClose()\n//     resetForm({username: currentUser.name, job: currentUser.about})\n//   }\n//   // function handleSubmit(evt) {\n//   //   evt.preventDefault();\n//   //   onUpdateUser({\n//   //     username: formValues.username,\n//   //     job: formValues.job,\n//   //   }, resetForm);\n//   // }\n//   function handleSubmit(evt) {\n//     evt.preventDefault();\n//     onUpdateUser(formValues, resetForm);\n//   }\n//   return(\n//     <PopupWithForm\n//       name='edit-profile'\n//       title='Редактировать профиль'\n//       titleBtn='Сохранить'\n//       isOpen={ isOpen }\n//       onClose={ handleClosePopupResetForm }\n//       isFormValid = { isFormValid }\n//       isLoadingPopup = { isLoadingPopup }\n//       onSubmit={handleSubmit}\n//     >\n//       <label className=\"form__label\" htmlFor=\"username\">\n//         <input\n//           id=\"username\"\n//           className={`form__input form__input_type_name ${isInputValid.username === undefined || isInputValid.username ? '' :'form__input_type_error'}`}\n//           name=\"username\"\n//           minLength={2}\n//           maxLength={40}\n//           type=\"text\"\n//           required\n//           placeholder=\"Ваше имя\"\n//           value={formValues.username || ''}\n//           disabled = {isLoadingPopup}\n//           onChange={handleChange}\n//         />\n//         <span className=\"form__span-error username-error\">{errors.username}</span>\n//       </label>\n//       <label className=\"form__label\" htmlFor=\"job\">\n//         <input\n//           id=\"job\"\n//           className={`form__input form__input_type_job ${isInputValid.job === undefined || isInputValid.job ? '' :'form__input_type_error'}`}\n//           name=\"job\"\n//           minLength={2}\n//           maxLength={200}\n//           type=\"text\"\n//           required\n//           placeholder=\"О вас\"\n//           value={formValues.job || ''}\n//           disabled = {isLoadingPopup}\n//           onChange={handleChange}\n//         />\n//         <span className=\"form__span-error job-error\">{errors.job} </span>\n//       </label>\n//     </PopupWithForm>\n//   )\n// }","map":{"version":3,"names":["useContext","useEffect","CurrentUserContext","useFormValidate","PopupWithForm","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","_ref","isOpen","onClose","onUpdateUser","isLoadingPopup","currentUser","formValues","errors","isFormValid","isInputValid","handleChange","resetForm","setInitialValue","name","about","handleClosePopupResetForm","username","job","handleSubmit","evt","preventDefault","inputErrorClass","input","title","titleBtn","onSubmit","children","className","htmlFor","id","concat","minLength","maxLength","type","required","placeholder","value","disabled","onChange"],"sources":["C:/Users/Mihail/dev/react-mesto-auth/src/components/EditProfilePopup/EditProfilePopup.jsx"],"sourcesContent":["import { useContext, useEffect } from \"react\";\r\nimport CurrentUserContext from \"../../contexts/CurrentUserContext\";\r\nimport useFormValidate from \"../../utils/hooks/useFormValidate\";\r\nimport PopupWithForm from \"../PopupWithForm/PopupWithForm\";\r\n\r\nexport default function EditProfilePopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateUser,\r\n  isLoadingPopup,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const {\r\n    formValues,\r\n    errors,\r\n    isFormValid,\r\n    isInputValid,\r\n    handleChange,\r\n    resetForm,\r\n    setInitialValue,\r\n  } = useFormValidate();\r\n\r\n  useEffect(() => {\r\n    setInitialValue(\"username\", currentUser.name);\r\n    setInitialValue(\"job\", currentUser.about);\r\n  }, [currentUser, setInitialValue]);\r\n\r\n  function handleClosePopupResetForm() {\r\n    onClose();\r\n    resetForm({ username: currentUser.name, job: currentUser.about });\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser(formValues, resetForm);\r\n  }\r\n\r\n  const inputErrorClass = (input) =>\r\n    input in isInputValid && !isInputValid[input]\r\n      ? \"form__input_type_error\"\r\n      : \"\";\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"edit-profile\"\r\n      title=\"Редактировать профиль\"\r\n      titleBtn=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={handleClosePopupResetForm}\r\n      isFormValid={isFormValid}\r\n      onSubmit={handleSubmit}\r\n      isLoadingPopup={isLoadingPopup}\r\n    >\r\n      <label className=\"form__label\" htmlFor=\"username\">\r\n        <input\r\n          id=\"username\"\r\n          className={`form__input form__input_type_name ${inputErrorClass(\r\n            \"username\"\r\n          )}`}\r\n          name=\"username\"\r\n          minLength={2}\r\n          maxLength={40}\r\n          type=\"text\"\r\n          required\r\n          placeholder=\"Ваше имя\"\r\n          value={formValues.username || \"\"}\r\n          disabled={isLoadingPopup}\r\n          onChange={handleChange}\r\n        />\r\n        <span className=\"form__span-error username-error\">\r\n          {errors.username}\r\n        </span>\r\n      </label>\r\n      <label className=\"form__label\" htmlFor=\"job\">\r\n        <input\r\n          id=\"job\"\r\n          className={`form__input form__input_type_job ${inputErrorClass(\r\n            \"job\"\r\n          )}`}\r\n          name=\"job\"\r\n          minLength={2}\r\n          maxLength={200}\r\n          type=\"text\"\r\n          required\r\n          placeholder=\"О вас\"\r\n          value={formValues.job || \"\"}\r\n          disabled={isLoadingPopup}\r\n          onChange={handleChange}\r\n        />\r\n        <span className=\"form__span-error job-error\">{errors.job} </span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\n// import { useContext, useEffect } from \"react\";\r\n// import CurrentUserContext from \"../../contexts/CurrentUserContext\";\r\n// import useFormValidate from \"../../utils/hooks/useFormValidate\";\r\n// import PopupWithForm from \"../PopupWithForm/PopupWithForm\";\r\n\r\n// export default function EditProfilePopup({isOpen, onClose, onUpdateUser, isLoadingPopup }) {\r\n//   const currentUser = useContext(CurrentUserContext)\r\n//   //const {name, about} = currentUser\r\n\r\n//   const {\r\n//     formValues,\r\n//     errors,\r\n//     isFormValid,\r\n//     isInputValid,\r\n//     handleChange,\r\n//     resetForm,\r\n//     setInitialValue\r\n\r\n//   } = useFormValidate();\r\n\r\n//   useEffect(() => {\r\n//     setInitialValue(\"username\", currentUser.name)\r\n//     setInitialValue(\"job\", currentUser.about)\r\n//   }, [currentUser, setInitialValue])\r\n\r\n//   function handleClosePopupResetForm() {\r\n//     onClose()\r\n//     resetForm({username: currentUser.name, job: currentUser.about})\r\n//   }\r\n\r\n//   // function handleSubmit(evt) {\r\n//   //   evt.preventDefault();\r\n//   //   onUpdateUser({\r\n//   //     username: formValues.username,\r\n//   //     job: formValues.job,\r\n\r\n//   //   }, resetForm);\r\n\r\n//   // }\r\n\r\n//   function handleSubmit(evt) {\r\n//     evt.preventDefault();\r\n//     onUpdateUser(formValues, resetForm);\r\n//   }\r\n\r\n//   return(\r\n//     <PopupWithForm\r\n//       name='edit-profile'\r\n//       title='Редактировать профиль'\r\n//       titleBtn='Сохранить'\r\n//       isOpen={ isOpen }\r\n//       onClose={ handleClosePopupResetForm }\r\n//       isFormValid = { isFormValid }\r\n//       isLoadingPopup = { isLoadingPopup }\r\n//       onSubmit={handleSubmit}\r\n\r\n//     >\r\n//       <label className=\"form__label\" htmlFor=\"username\">\r\n//         <input\r\n//           id=\"username\"\r\n//           className={`form__input form__input_type_name ${isInputValid.username === undefined || isInputValid.username ? '' :'form__input_type_error'}`}\r\n//           name=\"username\"\r\n//           minLength={2}\r\n//           maxLength={40}\r\n//           type=\"text\"\r\n//           required\r\n//           placeholder=\"Ваше имя\"\r\n//           value={formValues.username || ''}\r\n//           disabled = {isLoadingPopup}\r\n\r\n//           onChange={handleChange}\r\n//         />\r\n//         <span className=\"form__span-error username-error\">{errors.username}</span>\r\n//       </label>\r\n//       <label className=\"form__label\" htmlFor=\"job\">\r\n//         <input\r\n//           id=\"job\"\r\n//           className={`form__input form__input_type_job ${isInputValid.job === undefined || isInputValid.job ? '' :'form__input_type_error'}`}\r\n//           name=\"job\"\r\n//           minLength={2}\r\n//           maxLength={200}\r\n//           type=\"text\"\r\n//           required\r\n//           placeholder=\"О вас\"\r\n//           value={formValues.job || ''}\r\n//           disabled = {isLoadingPopup}\r\n//           onChange={handleChange}\r\n//         />\r\n//         <span className=\"form__span-error job-error\">{errors.job} </span>\r\n//       </label>\r\n//     </PopupWithForm>\r\n\r\n//   )\r\n// }\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}