{"ast":null,"code":"class Api{constructor(options){this._baseUrl=options.baseUrl;this._headers=options.headers;}//Проверяет ответ от сервера на предмет успешности запроса.\n_checkRes(res){if(res.ok){return res.json();}// если ошибка, отклоняем промис\nreturn Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}// Выполняет сетевой запрос с использованием fetch и проверяет ответ с помощью _checkResponse.\n// Возвращает результат запроса в виде промиса\n_request(baseUrl,options){return fetch(baseUrl,options).then(this._checkRes);}//Метод запроса информации о пользователе\ngetUserInfo(token){return this._request(\"\".concat(this._baseUrl,\"/users/me\"),{headers:{// ...this._headers, //?\nAuthorization:\"Bearer \".concat(token)}});}// Метод запроса информации о карточке\ngetInitialCards(token){return this._request(\"\".concat(this._baseUrl,\"/cards\"),{headers:{// ...this._headers, //?\nAuthorization:\"Bearer \".concat(token)}});}// Метод отправки информации о пользователе\nsendUserInfo(userData,token){return this._request(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"PATCH\",headers:{...this._headers,Authorization:\"Bearer \".concat(token)},body:JSON.stringify({name:userData.username,about:userData.job})});}// Метод установки аватара профиля\nsetUserAvatar(avatarData,token){return this._request(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:\"PATCH\",headers:{...this._headers,Authorization:\"Bearer \".concat(token)},body:JSON.stringify({avatar:avatarData.avatar})});}// Метод добавления новой карточки\nsendNewCardInfo(cardData,token){return this._request(\"\".concat(this._baseUrl,\"/cards\"),{method:\"POST\",headers:{...this._headers,Authorization:\"Bearer \".concat(token)},body:JSON.stringify({name:cardData.name,link:cardData.link})});}// Метод удаления карточки\ndeleteCard(cardId,token){return this._request(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:{\"Authorization\":\"Bearer \".concat(token)}});}// // Метод установки лайков\n// setCardLike(cardId, token) {\n//   return this._request(`${this._baseUrl}/cards/${cardId}/likes`, {\n//     method: \"PUT\",\n//     headers: {\n//       \"Authorization\": `Bearer ${token}`,\n//     },\n//   });\n// }\n// // Метод удаления лайка карточки\n// deleteCardLike(cardId, token) {\n//   return this._request(`${this._baseUrl}/cards/${cardId}/likes`, {\n//     method: \"DELETE\",\n//     headers: {\n//       \"Authorization\": `Bearer ${token}`,\n//     },\n//   });\n// }\nchangeLikeCardStatus(cardId,isLiked,token){return this._request(\"\".concat(this._baseUrl,\"/cards/\").concat(cardId,\"/likes\"),{method:\"\".concat(!isLiked?\"DELETE\":\"PUT\"),headers:{Authorization:\"Bearer \".concat(token)}});}}// Создание экземпляра класса\n// const api = new Api({\n//   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-77\",\n//   headers: {\n//     authorization: \"3edcdea5-b130-42c1-9a7c-9c803e968261\",\n//     \"Content-Type\": \"application/json\",\n//   },\n// });\nconst api=new Api({baseUrl:\"http://localhost:3000\"// headers: {\n//   \"Content-Type\": \"application/json\",\n// },\n});export default api;","map":{"version":3,"names":["Api","constructor","options","_baseUrl","baseUrl","_headers","headers","_checkRes","res","ok","json","Promise","reject","concat","status","_request","fetch","then","getUserInfo","token","Authorization","getInitialCards","sendUserInfo","userData","method","body","JSON","stringify","name","username","about","job","setUserAvatar","avatarData","avatar","sendNewCardInfo","cardData","link","deleteCard","cardId","changeLikeCardStatus","isLiked","api"],"sources":["C:/Users/Mihail/dev/react-mesto-api-full-gha/frontend/src/utils/api.js"],"sourcesContent":["class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  //Проверяет ответ от сервера на предмет успешности запроса.\r\n  _checkRes(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    // если ошибка, отклоняем промис\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  // Выполняет сетевой запрос с использованием fetch и проверяет ответ с помощью _checkResponse.\r\n  // Возвращает результат запроса в виде промиса\r\n  _request(baseUrl, options) {\r\n    return fetch(baseUrl, options).then(this._checkRes);\r\n  }\r\n\r\n  //Метод запроса информации о пользователе\r\n  getUserInfo(token) {\r\n    return this._request(`${this._baseUrl}/users/me`, {\r\n      headers: {\r\n        // ...this._headers, //?\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n  }\r\n\r\n  \r\n  // Метод запроса информации о карточке\r\n  getInitialCards(token) {\r\n    return this._request(`${this._baseUrl}/cards`, {\r\n      headers: {\r\n        // ...this._headers, //?\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    });\r\n  }\r\n\r\n  // Метод отправки информации о пользователе\r\n  sendUserInfo(userData, token) {\r\n    return this._request(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        ...this._headers,\r\n        Authorization: `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        name: userData.username,\r\n        about: userData.job,\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Метод установки аватара профиля\r\n  setUserAvatar(avatarData, token) {\r\n    return this._request(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        ...this._headers,\r\n        Authorization: `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: avatarData.avatar,\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Метод добавления новой карточки\r\n  sendNewCardInfo(cardData, token) {\r\n    return this._request(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        ...this._headers,\r\n        Authorization: `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({\r\n        name: cardData.name,\r\n        link: cardData.link,\r\n      }),\r\n    });\r\n  }\r\n\r\n  // Метод удаления карточки\r\n  deleteCard(cardId, token) {\r\n    return this._request(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Authorization\": `Bearer ${token}`,\r\n      },\r\n    });\r\n  }\r\n\r\n  // // Метод установки лайков\r\n  // setCardLike(cardId, token) {\r\n  //   return this._request(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n  //     method: \"PUT\",\r\n  //     headers: {\r\n  //       \"Authorization\": `Bearer ${token}`,\r\n  //     },\r\n  //   });\r\n  // }\r\n\r\n  // // Метод удаления лайка карточки\r\n  // deleteCardLike(cardId, token) {\r\n  //   return this._request(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n  //     method: \"DELETE\",\r\n  //     headers: {\r\n  //       \"Authorization\": `Bearer ${token}`,\r\n  //     },\r\n  //   });\r\n  // }\r\n\r\n  changeLikeCardStatus(cardId, isLiked, token) {\r\n    return this._request(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n      method: `${!isLiked ? \"DELETE\" : \"PUT\"}`,\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// Создание экземпляра класса\r\n// const api = new Api({\r\n//   baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-77\",\r\n//   headers: {\r\n//     authorization: \"3edcdea5-b130-42c1-9a7c-9c803e968261\",\r\n//     \"Content-Type\": \"application/json\",\r\n//   },\r\n// });\r\n\r\nconst api = new Api({\r\n  baseUrl: \"http://localhost:3000\",\r\n  // headers: {\r\n  //   \"Content-Type\": \"application/json\",\r\n  // },\r\n});\r\n\r\n\r\nexport default api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}